MODULE Counter0 (IN CLK50M, rstIn: BIT;
  IN swi: BYTE; OUT leds: BYTE);
REG (CLK50M) rst: BIT;
  cnt0: [16] BIT; (*milliseconds*)
  cnt1: [10] BIT; (*half seconds*)
  cnt2: [8] BIT;
VAR tick0, tick1: BIT;
BEGIN leds := swi.7 -> swi : cnt2;
  tick0 := (cnt0 = 49999);
  tick1 := tick0 & (cnt1 = 499);
  rst := ~rstIn;
  cnt0 := ~rst -> 0 : tick0 -> 0 : cnt0 + 1;
  cnt1 := ~rst -> 0 : tick1 -> 0 : cnt1 + tick0;
  cnt2 := ~rst -> 0 : cnt2 + tick1
END Counter0.

(* vim:set ts=2 sw=2 et: *)
